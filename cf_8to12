{
    "AWSTemplateFormatVersion": "2010-09-09",
	"Resources" : {
        "priRT" : {
            "Type" : "AWS::EC2::RouteTable",
            "Properties" : {
                "Tags" : [ 
                    {"Key" : "Name", "Value" : "mypriRT"}
                ],
                "VpcId" : {
                    "Ref" : "myvpc"
                }
              } 
        } ,
        "pubRT" : {
            "Type" : "AWS::EC2::RouteTable",
            "Properties" : {
                "Tags" : [
                    {"Key" : "Name", "Value" : "mypubRT"}
                ],
                "VpcId" : {
                    "Ref" :"myvpc"
                }
            }

        } ,
        "prisub2RT" : {
            "Type" : "AWS::EC2::SubnetRouteTableAssociation",
            "Properties" : {
                "RouteTableId" : {
                    "Ref" : "priRT"
              } ,
              "SubnetId" : {
                  "Ref" : "privateSubnet"
              } 
           
           }
        } ,
        "pubsub2RT" : {
            "Type" : "AWS::EC2::SubnetRouteTableAssociation",
            "Properties" : {
                "RouteTableId" : {
                    "Ref" : "pubRT"
                } ,
                "SubnetId" : {
                    "Ref" : "publicSubnet"
                } 
            }
        } ,
        "myNAT" : {
            "NAT" : {
                "Type" : "AWS::EC2::NatGateway",
                "Properties" : {
                   "AllocationId" : { "Fn::GetAtt" : ["EIP", "AllocationId"]},
                   "SubnetId" : { "Ref" : "publicSubnet"},
                   "Tags" : [ {"Key" : "Name", "Value" : "egs_NAT" } ]
                  }
            }
        } ,
        "EIP" : {
            "DependsOn" : "VPCGatewayAttach",
            "Type" : "AWS::EC2::EIP",
            "Properties" : {
               "Domain" : "myvpc"
            }
        },
         "priRT2NAT" : {
            "Type" : "AWS::EC2::Route",
            "Properties" : {
               "RouteTableId" : { "Ref" : "priRT" },
               "DestinationCidrBlock" : "0.0.0.0/0",
               "NatGatewayId" : { "Ref" : "myNAT" }
            } 
        } ,
        "pubRT2IntGw" : {
            "Type" : "AWS::EC2::Route",
            "Properties" : {
               "RouteTableId" : { "Ref" : "pubRT" },
               "DestinationCidrBlock" : "0.0.0.0/0",
               "GatewayId" : { "Ref" : "myInternetGateway" }
            }
         }
        

        
    }
}
